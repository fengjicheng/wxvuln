#  【漏洞通告】Apache Shiro 目录穿越漏洞CVE-2023-34478   
深瞳漏洞实验室  深信服千里目安全技术中心   2023-07-25 18:59  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4y1jq2oJtlXftc4eFB3KCQ1eLkicTYUDga2JkcUebIqMe7KIXTiak3xgOw/640?wx_fmt=gif&wxfrom=5&wx_lazy=1 "")  
  
**漏洞名称：**  
  
Apache Shiro目录穿越漏洞CVE-2023-34478  
  
**组件名称：**  
  
Apache Shiro  
  
**影响范围：**  
  
Apache Shiro < 1.12.0,  
  
2.0.0 ≤ Apache Shiro < 2.0.0-alpha-3  
  
**漏洞类型：**  
  
目录穿越  
  
**利用条件：**  
  
1、用户认证：未知  
  
2、前置条件：未知  
  
3、触发方式：远程  
  
**综合评价：**  
  
<综合评定利用难度>：未知  
  
<综合评定威胁等级>：高危，能造成身份认证绕过。  
  
**官方解决方案：**  
  
已发布  
  
  
  
  
  
**漏洞分析**  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yeux0hYktqibyOjAQTBlCF9epUjfnhWTic1MkIHVSRMmAapEbmgzguN4Q/640?wx_fmt=gif&wxfrom=5&wx_lazy=1 "")  
  
**组件介绍**  
  
Apache Shiro是一种功能强大且易于使用的Java安全框架，它具有身份验证、访问授权、数据加密、会话管理等功能，可用于保护各种应用程序的安全。  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yeux0hYktqibyOjAQTBlCF9epUjfnhWTic1MkIHVSRMmAapEbmgzguN4Q/640?wx_fmt=gif&wxfrom=5&wx_lazy=1 "")  
  
**漏洞简介**  
  
2023年7月24日，深信服安全团队监测到一则Apache Shiro组件存在目录穿越漏洞的信息，漏洞编号：CVE-2023-34478，漏洞威胁等级：高危。  
  
该漏洞是由于请求路由及API使用不规范，**攻击者可利用该漏洞，构造恶意数据执行目录穿越攻击，最终造成身份认证绕过。**  
  
  
**影响范围**  
  
目前受影响的Apache Shiro版本：  
  
Apache Shiro < 1.12.0,  
  
2.0.0 ≤ Apache Shiro < 2.0.0-alpha-3  
  
  
**解决方案**  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yeux0hYktqibyOjAQTBlCF9epUjfnhWTic1MkIHVSRMmAapEbmgzguN4Q/640?wx_fmt=gif&wxfrom=5&wx_lazy=1 "")  
  
**如何检测组件版本**  
  
  
全盘搜索shiro，如果存在shiro-core-{version}.jar，则用户可能受漏洞影响。  
  
  
![](https://mmbiz.qpic.cn/mmbiz_png/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yibX5pYCWU4UmtvwSC6poNZqn13kJsqaWtAbNQah7zOGlZHXpD60pa1Q/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1 "")  
  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yeux0hYktqibyOjAQTBlCF9epUjfnhWTic1MkIHVSRMmAapEbmgzguN4Q/640?wx_fmt=gif&wxfrom=5&wx_lazy=1 "")  
  
**官方修复建议**  
  
  
当前官方已发布最新版本，建议受影响的用户及时更新升级到最新版本。链接如下：  
  
https://issues.apache.org/jira/browse/OFBIZ-12839  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yeux0hYktqibyOjAQTBlCF9epUjfnhWTic1MkIHVSRMmAapEbmgzguN4Q/640?wx_fmt=gif&wxfrom=5&wx_lazy=1 "")  
  
**深信服解决方案**  
  
  
**1.风险资产发现**  
  
支持对 Apache Shiro的主动检测，可批量检出业务场景中该事件的受影响资产情况，相关产品如下：  
  
**【深信服主机安全检测响应平台CWPP】**已发布资产检测方案。  
  
**【深信服云镜YJ】**已发布资产检测方案。  
  
  
  
**参考链接**  
  
  
https://www.mail-archive.com/notifications@ofbiz.apache.org/msg51800.html  
  
  
**时间轴**  
  
  
  
**2023/7/24**  
  
深信服监测到Apache Shiro目录穿越漏洞CVE-2023-34478攻击信息。  
  
  
**2023/7/24**  
  
深信服千里目安全技术中心发布漏洞通告。  
  
  
点击**阅读原文**，及时关注并登录深信服**智安全平台**，可轻松查询漏洞相关解决方案。  
  
![](https://mmbiz.qpic.cn/mmbiz_png/w8NHw6tcQ5wAVDB0xrncuqLlmr3cmh5DZmMouUO5ehkGibbASMHtkW1rkyAU0HRzWFhzibZ7VHVaQKd9ob3eIpNA/640?wx_fmt=png "")  
  
![](https://mmbiz.qpic.cn/mmbiz_jpg/w8NHw6tcQ5yw218VqQoVLR9m8UDDicc4yRNPFQw7aaVy8KNWdM5m17YyZ9E6eEgU6L0wHuyRalQO9jibRB94QQ1g/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1 "")  
  
  
  
