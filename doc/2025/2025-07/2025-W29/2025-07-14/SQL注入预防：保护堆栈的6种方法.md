> **原文链接**: https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652117110&idx=1&sn=424f3e72e01803f37bc6a49157e8106f

#  SQL注入预防：保护堆栈的6种方法  
 祺印说信安   2025-07-14 16:02  
  
SQL 注入是黑客攻击手册中最古老的伎俩之一……但它仍然有效。  
  
只需几次按键操作，攻击者就能迫使您的数据库泄露机密信息，从用户名、密码到信用卡数据，不一而足。对于企业而言，此类数据泄露意味着财务损失、法律纠纷以及严重的声誉损害。  
  
可怕的是？SQL 注入相对容易预防，但由于懒惰的编码、过时的框架和不充分的输入验证，它仍然普遍存在。  
  
让我们修复它。  
  
**快速修复：快速阻止SQL注入的6种方法**：  
1. 在输入到达数据库之前验证所有输入  
1. 使用参数化查询或准备好的语句  
1. 对数据库帐户强制执行最小特权原则  
1. 保持软件堆栈的修补和更新  
1. 使用 Web 应用程序防火墙 (WAF)  
1. 加密敏感数据以限制泄露影响  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/sNicKB84ZxoGla4lWj5yFZYZOicjhbibic1VsrqHSLmq8pEhn6hIUK6Uq0ibfvrvpNxjuG2MRpnq1qRQ6LaiaicumZXLg/640?wx_fmt=png&from=appmsg "")  
## 1. 在输入到达数据库之前验证所有输入  
  
永远不要相信用户输入，即使它看起来无害。SQL 注入的根源在于糟糕的输入验证，尤其是在未检查类型、格式或长度的情况下就接受数据。  
  
输入验证是您的第一道防线。确保用户输入干净、符合预期且严格控制。尽可能根据白名单进行验证（例如，允许的字符、值范围），并在将任何非预期内容传递给查询之前将其拒绝。  
  
**提示**：将输入验证与参数化查询相结合，以实现最大程度的保护。验证可以过滤掉垃圾数据，而参数化则可确保剩余的数据不会被当作 SQL 执行。  
## 2.使用参数化查询（准备好的语句）  
  
别再像复制粘贴用户输入那样构建 SQL 查询了。当你连接字符串来创建查询时，攻击者可能会将恶意代码注入你的数据库。  
  
参数化查询将用户输入与 SQL 逻辑分离，从而消除任何注入的语法。几乎所有现代编程语言和框架都支持此功能。  
  
**Python 示例：**  
  
cursor.execute（“SELECT * FROM users WHERE email=？”，（email，））  
  
这个简单的改变会带来巨大的改变。它或许能让你的应用避免成为警示故事。  
## 3. 应用最小特权原则  
  
不要把数据库的钥匙交给数据库用户。如果你的应用只需要读取数据，就不要授予写入、更新或删除权限。如果它需要更新记录，就不应该拥有删除表的权限。  
  
限制访问可以最大限度地减少有人找到入侵方法时造成的损害。它还有助于隔离应用程序特定部分的缺陷。  
  
**最佳实践**：为应用程序的不同部分创建单独的数据库用户 - 每个用户仅具有所需的权限。  
## 4. 保持堆栈更新  
  
攻击者喜欢使用过时的软件。如果您的数据库服务器、Web 框架或 CMS 最近没有更新，那么很可能错过了关键的安全补丁。  
  
通过工具可以持续扫描您的基础设施，查找未修补的漏洞和过时的依赖项。  
  
**提示**：设置自动警报或安排补丁周期，以领先于针对已知 SQL 注入漏洞的漏洞工具包。  
## 5.部署Web应用程序防火墙（WAF）  
  
可以将WAF视为应用的安全保镖。它会分析传入流量，并在恶意请求（包括 SQL 注入负载）到达您的代码之前将其拦截。这其中也包括一些更高级的技术，例如碎片化或混淆的 SQL 注入，这些技术旨在绕过简单的输入过滤器。  
  
一些消费者友好的安全平台，例如**Norton**和**Avast**，提供功能类似于小型企业网站或 WordPress 安装的 WAF 的网络保护层。  
  
**请记住**：高级站点应该考虑企业级 WAF，尤其是在处理敏感客户数据或大量流量时。  
## 6.加密敏感数据  
  
加密并不能阻止 SQL 注入，但它可以限制可能造成的损害。如果攻击者设法提取了您的数据库内容，您希望这些数据对他们毫无用处。  
  
通过使用强大的单向算法（例如 bcrypt 或 Argon2）对密码进行散列来安全地存储密码，并对财务数据或 PII 等敏感记录使用对称或非对称加密。  
  
加密工具可以更轻松地加密文件和凭据，尤其是在远程或分布式环境中。  
## 使用这些工具在 SQL 注入开始之前阻止它  
  
代码是您的第一道防线，但并非唯一的防线。这些工具可以帮助您检测漏洞、保护敏感数据并确保开发工作流程的安全。  
### 加密和凭证管理器  
- 敏感文件的端到端加密  
- 具有违规监控功能的密码管理器  
- 内置 MFA 的身份和访问管理  
- 具有团队共享功能的凭证库  
### 威胁和漏洞检测  
- 漏洞管理和威胁暴露分析  
- 人工智能驱动的端点保护和实时扫描  
- **云**、端点和工作负载安全  
- 强大的反恶意软件和漏洞防护  
### 用于安全开发的VPN  
- 快速、安全的 VPN，非常适合开发人员和远程工作者  
- 连接无限设备并阻止追踪器  
- 开发人员的高级配置选项  
## 最后的想法  
  
SQL 注入攻击不会消失。但只需采取一些巧妙的措施，例如参数化查询和最低权限访问，就能在这些攻击触及数据之前将其阻止。  
  
立即采取行动：审核您的代码库、扫描漏洞并加密所有重要内容。  
  
安全并非一朝一夕就能解决的，而是一种习惯。  
  
—  
 **欢迎关注 往期回顾**  
 —  
  
**2025收集更新信通院白皮书系列合集（665个）下载**  
  
**什么是真正的信息安全服务？“专业公司”“专业人士”误导“安服”概念有多严重？**  
  
****  
**——等级保护**  
  
**欲等保定级先数据分类分级**  
  
**浅谈重要数据识别与等级保护之间关系**  
  
**等级保护走向严监管，明确测评双方的责任从了解测评过程指南开始（思维导图下载）**  
  
**新形势下的等级保护定级备案如何开展**  
  
**2025公安部网安局等保工作最新要求逐条解析**  
  
**公网安〔2025〕1846号文：风险隐患及工作方案释疑浅谈**  
  
**公网安〔2025〕1846号文：数据摸底调查释疑浅谈**  
  
**公网安〔2025〕1846号文：第五级网络系统释疑浅谈**  
  
**公网安〔2025〕1846号文：定级备案的最新释疑浅谈**  
  
关于25年定级备案公安部网安局释疑的一点浅谈  
  
公网安〔2025】1846号关于对网络安全等级保护有关工作事项进一步说明的函  
  
新等保测评真的取消打分了吗？一点杂谈！  
  
新定级备案模板明确数据安全纳入等级保护体系  
  
等保定级新模板新要求，2025定级工作新变化  
  
测评机构老板与销售注意：浅谈测评机构如何更好的满足属地网安监管？  
  
**网络安全等级保护：等级保护工作、分级保护工作、密码管理工作三者之间的关系**  
  
河南省新规定测评与密评预算再调低  
  
四川省等级测评与商密评估预算计算方法  
  
广西壮族自治区等级测评与商密评估预算为几何？  
  
黑龙江财政关于等级测评与商密评估预算为几何？  
  
和Deepseek一起共同探讨《国家信息化领导小组关于加强信息安全保障工作的意见》  
  
[和Deepseek一起共同探讨《关于信息安全等级保护工作的实施意见》](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652114684&idx=1&sn=59de3b0fa94b3ea300beb1fcdb5b87ae&scene=21#wechat_redirect)  
  
  
[与Deepseek一起谈开展等级测评的必要性！](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652114693&idx=1&sn=dd12972dcbea1242e5064ae4189a0dbb&scene=21#wechat_redirect)  
  
  
**——数据安全**  
  
**《网络数据安全管理条例》解读**  
  
**了解企业数据目录**  
  
**结构化数据与非结构化数据**  
  
[市场监管总局印发《网络交易合规数据报送管理暂行办法》](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652115101&idx=1&sn=96dcac6598142fe6dd586ef5e25a5f6d&scene=21#wechat_redirect)  
  
  
[数据安全知识：什么是数据安全？](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652116361&idx=1&sn=a985e842912847e645bff637f5f8b5fa&scene=21#wechat_redirect)  
  
  
[了解企业数据目录](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652116312&idx=1&sn=e7cda105c33a8875421a3e828a527676&scene=21#wechat_redirect)  
  
  
[网警提醒  | 3.31世界备份日：重视你的数据安全](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652115051&idx=1&sn=39dd57267f30159901f085fa8b5e5bf2&scene=21#wechat_redirect)  
  
  
[网络和数据安全合规：15部门发布指导意见助力中小企业全面合规](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652114753&idx=1&sn=0c1934ada45a9d35dfabc7d3bd0bf2a7&scene=21#wechat_redirect)  
  
  
[数码复印机数据安全：企业指南](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652114562&idx=1&sn=16249810510fec23333e8818bc38172c&scene=21#wechat_redirect)  
  
  
[《数据安全法》中有关数据安全保护的法律义务](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652114424&idx=1&sn=7a938534cfca30a867cd5789c205aa37&scene=21#wechat_redirect)  
  
  
**——工业控制系统**  
  
**工业控制系统安全IEC 62443标准：概述**  
  
**普渡大学工业控制系统安全模型**  
  
**一图读懂工业和信息化领域数据安全事件应急预案（试行）**  
  
**网络安全知识：什么是工业控制系统 (ICS) 网络安全？**  
  
**——错与罚**  
  
江苏涟水农村商业银违反网络安全与数据安全管理规定等被罚114.5万  
  
净网—2025 | 房子刚买完，电话被打爆？网警侦办一起侵犯公民个人信息案  
  
果洛州网警开出首张网络安全“罚单”  
  
护网—2025 | 网警公布适用《网络数据安全管理条例》典型案例  
  
辽宁三家银行被罚款均超百万，其中涉及网络和数据安全管理  
  
交通银行辽宁省分行因多项违规被罚116万元，其中含网络和数据安全管理  
  
湖北咸宁农商行因“违反征信安全管理规定;数据安全管理规定”等被罚5.31万  
  
存在未授权访问漏洞等问题！北京依法查处两家违法企业  
  
涉未落实等级保护……建设银行安阳分行因存在多项网络安全问题被罚50.7万元  
  
商丘睢县农信联社被罚64万元，其中涉及网络安全、数据安全  
  
网络不是法外之地，胖东来胜诉，段某判罚40万元，双方暂不上诉  
  
网络安全无小事！某企业因疏于防护被依法查处  
  
江苏灌南农商行因违反数据安全管理规定等被罚97.5万  
  
网安企业“内鬼”监守自盗，窃取个人信息2.08亿条  
  
**郑州3家公司未履行网络安全保护义务被网信部门约谈**  
  
**25年郑州新增两家公司违反《网络安全法》被市网信办行政处罚**  
  
**驻马店市委网信办就网络安全问题依法约谈相关责任单位**  
  
两家银行因数据安全相关问题，被罚款  
  
河北保定竞秀区委网信办依法约谈网站负责人  
  
贵港市网信办公布2起网络安全违法违规典型案例  
  
公安机关依法严厉打击侵犯公民个人信息犯罪，10起典型案例公布  
  
重庆网信部门近期就企业违法违规情况开展多起约谈与处罚  
  
新华社：中国电信、中国移动、中国联通，集体回应！  
  
[重庆网信部门就一企业系统遭境外组织攻击，开展联合公安约谈](https://mp.weixin.qq.com/s?__biz=MzA5MzU5MzQzMA==&mid=2652114884&idx=1&sn=34dcbb8e986a5b2104700262223aed13&scene=21#wechat_redirect)  
  
  
——其他  
  
**浅谈网络“四法四条例四办法一意见”与山东数字政府建设改革方案**  
  
**精彩回顾：祺印说信安2024之前**  
  
**祺印说信安2024年一年回顾**  
  
**网警提醒  | 3.31世界备份日：重视你的数据安全**  
  
**网络安全知识：什么是技术债务？**  
  
**网络安全知识：网络威胁情报解析**  
  
**网络安全知识：什么是数字凭证？**  
  
**网络安全知识：什么是软件开发？**  
  
**网络安全知识：什么是事件响应？事件框架概述**  
  
**网络安全知识：网络安全意识**  
  
**5月1日起，《国家秘密定密管理规定》正式施行**  
  
**黑客攻击远程服务器十大弱口令**  
  
