#  【漏洞通告】PostgreSQL JDBC SQL注入漏洞CVE-2024-1597   
深瞳漏洞实验室  深信服千里目安全技术中心   2024-02-22 16:31  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcH8mkUkXHmj2AibKbkoFmia0RbUol6F0ZMVicro8sj4nUJicMdxVS8I615Rw/640?wx_fmt=gif&from=appmsg "")  
  
**漏洞名称：**  
  
PostgreSQL JDBC SQL注入漏洞(CVE-2024-1597)  
  
**组件名称：**  
  
PostgreSQL JDBC Driver  
  
**影响范围：**  
  
42.7.0 ≤ PostgreSQL JDBC Driver < 42.7.2  
  
42.6.0 ≤ PostgreSQL JDBC Driver < 42.6.1  
  
42.5.0 ≤ PostgreSQL JDBC Driver < 42.5.5  
  
42.4.0 ≤ PostgreSQL JDBC Driver < 42.4.4  
  
42.3.0 ≤ PostgreSQL JDBC Driver < 42.3.9  
  
PostgreSQL JDBC Driver < 42.2.8  
  
**漏洞类型：**  
  
SQL注入  
  
**利用条件：**  
  
1、用户认证：未知  
  
2、前置条件：开启PreferQueryMode = SIMPLE  
  
3、触发方式：远程  
  
**综合评价：**  
  
<综合评定利用难度>：较高，存在非默认的前置条件。  
  
<综合评定威胁等级>：高危，能造成远程代码执行。。  
  
**官方解决方案：**  
  
已发布  
  
  
  
  
  
**漏洞分析**  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcHlkLfPSZd0c002gTeSWRoNpAU3wZDnrib7s0v50KEMdmu3OAC7NcickLA/640?wx_fmt=gif&from=appmsg "")  
  
**组件介绍**  
  
PostgreSQL是一种功能强大的开源对象关系型数据库系统，它以其可靠性、健壮性和性能而闻名，适用于处理从小型应用程序到大型互联网应用程序以及数据仓库的各种工作负载。  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcHlkLfPSZd0c002gTeSWRoNpAU3wZDnrib7s0v50KEMdmu3OAC7NcickLA/640?wx_fmt=gif&from=appmsg "")  
  
**漏洞简介**  
  
2024年2月22日，深瞳漏洞实验室监测到一则PostgreSQL组件存在SQL注入漏洞的信息，漏洞编号：CVE-2024-1597，漏洞威胁等级：高危。  
  
该漏洞是由于设置PreferQueryMode=SIMPLE时PostgreSQL对占位符的处理存在缺陷，**攻击者可利用该漏洞在未授权的情况下，构造恶意数据执行SQL注入攻击，最终造成服务器敏感性信息泄露或执行任意代码。**  
  
  
**影响范围**  
  
目前受影响的PostgreSQL JDBC Driver版本：  
  
42.7.0 ≤ PostgreSQL JDBC Driver < 42.7.2  
  
42.6.0 ≤ PostgreSQL JDBC Driver < 42.6.1  
  
42.5.0 ≤ PostgreSQL JDBC Driver < 42.5.5  
  
42.4.0 ≤ PostgreSQL JDBC Driver < 42.4.4  
  
42.3.0 ≤ PostgreSQL JDBC Driver < 42.3.9  
  
PostgreSQL JDBC Driver < 42.2.8  
  
  
  
**解决方案**  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcHlkLfPSZd0c002gTeSWRoNpAU3wZDnrib7s0v50KEMdmu3OAC7NcickLA/640?wx_fmt=gif&from=appmsg "")  
  
**官方修复建议**  
  
  
当前官方已发布最新版本，建议受影响的用户及时更新升级到最新版本。链接如下：  
  
https://jdbc.postgresql.org/download/  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcHlkLfPSZd0c002gTeSWRoNpAU3wZDnrib7s0v50KEMdmu3OAC7NcickLA/640?wx_fmt=gif&from=appmsg "")  
  
**深信服解决方案**  
  
  
**1.风险资产发现**  
  
支持对PostgreSQL JDBC Driver的主动检测，可**批量检出**业务场景中该事件的受影响资产情况，相关产品如下：  
  
**【****深信服主机安全检测响应平台CWPP****】**已发布资产检测方案。  
  
**【深信服云镜YJ】**已发布资产检测方案。  
  
**【深信服漏洞评估工具TSS】**已发布资产检测方案。  
  
  
**参考链接**  
  
  
https://github.com/advisories/GHSA-xfg6-62px-cxc2  
  
  
**时间轴**  
  
  
  
**2024/2/22**  
  
深瞳漏洞实验室监测到PostgreSQL JDBC SQL注入漏洞(CVE-2024-1597)攻击信息。  
  
  
**2024/2/22**  
  
深瞳漏洞实验室发布漏洞通告。  
  
点击**阅读原文**，及时关注并登录深信服**智安全平台**，可轻松查询漏洞相关解决方案。  
  
![](https://mmbiz.qpic.cn/mmbiz_png/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcHGouffpO1q3PAWLQyHL5kY1s46diaHUeyianibqVwSSOuPsoJl44fNibk7Q/640?wx_fmt=png&from=appmsg "")  
  
![](https://mmbiz.qpic.cn/mmbiz_jpg/w8NHw6tcQ5xasJDPXVj5EfWvegb9dBcH6uWpfMVCxdicafUB3ibnymIErRxEH4zvvaF0LOVAEXnc6ichRMmjTRP8Q/640?wx_fmt=jpeg&from=appmsg "")  
  
  
  
