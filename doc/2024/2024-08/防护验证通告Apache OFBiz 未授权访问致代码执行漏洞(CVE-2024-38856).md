#  防护验证通告|Apache OFBiz 未授权访问致代码执行漏洞(CVE-2024-38856)   
原创 知其安安全研究院  知其安科技   2024-08-06 22:02  
  
0x1   
描述  
  
Apache OFBiz是由Apache软件基金会维护的顶级项目。它是一个100%开源的企业资源管理（ERP）解决方案，基于最新的J2EE/XML规范和技术标准，适用于大中型企业级、跨平台、跨数据库、跨应用服务器的多层、分布式电子商务类WEB应用系统。  
  
近日，知其安监测到Apache OFBiz 未授权访问致代码执行漏洞(CVE-2024-38856)在未经身份认证的情况下，可以通过该漏洞在服务器上执行任意代码，从而获取服务器权限。目前该漏洞的POC代码已公开。  
  
**披露时间：**2024年08月05日  
  
**影响版本：**Apache OFBiz <= 18.12.14  
  
**利用条件：**  
无需身份认证  
  
**利用难度：**  
较低  
  
0x2 防护建议  
  
目前官方已有更新的版本，建议升级至最新安全版本 https://ofbiz.apache.org/download.html。  
  
建议及时进行验证相关防护设备是否具备拦截检测能力，并更新防护规则。  
  
0x3 知其安验证支持  
  
知其安离朱安全验证平台，对该漏洞利用快速上线了验证规则，可以支持自动化验证WAF/IPS/NTA/IDS对该漏洞的拦    截检测能力。  
  
0x4 常见WAF的验证  
  
知其安对26款常见WAF进行了拦截测试验证，截至目前有5款WAF默认规则状态下可有效拦截。  
<table><colgroup style="outline: 0px;visibility: visible;"><col width="142" style="outline: 0px;visibility: visible;"/><col width="134" style="outline: 0px;visibility: visible;"/><col width="157" style="outline: 0px;visibility: visible;"/><col width="105" style="outline: 0px;visibility: visible;"/></colgroup><thead style="outline: 0px;height: 39px;visibility: visible;"><tr style="outline: 0px;height: 39px;visibility: visible;"><th colspan="1" rowspan="1" align="center" valign="middle" style="outline: 0px;word-break: break-all;hyphens: auto;height: 39px;visibility: visible;">WAF总数<br style="outline: 0px;visibility: visible;"/></th><th colspan="1" rowspan="1" align="center" valign="middle" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;"><p style="outline: 0px;visibility: visible;">可拦截的WAF</p></th><th colspan="1" rowspan="1" align="center" valign="middle" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;">无法拦截的WAF</th><th colspan="1" rowspan="1" width="62" align="center" valign="middle" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;">验证时间<br style="outline: 0px;visibility: visible;"/></th></tr></thead><tbody style="outline: 0px;visibility: visible;"><tr style="outline: 0px;visibility: visible;"><td colspan="1" rowspan="1" align="center" valign="middle" height="27" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;"><p style="outline: 0px;visibility: visible;"><span style="outline: 0px;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &#34;PingFang SC&#34;, Cambria, Cochin, Georgia, Times, &#34;Times New Roman&#34;, serif;font-size: 16px;letter-spacing: normal;text-align: left;visibility: visible;">26款</span></p></td><td colspan="1" rowspan="1" align="center" valign="middle" height="27" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;"><p style="outline: 0px;visibility: visible;"><span style="outline: 0px;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &#34;PingFang SC&#34;, Cambria, Cochin, Georgia, Times, &#34;Times New Roman&#34;, serif;font-size: 16px;letter-spacing: normal;text-align: left;visibility: visible;">5款</span></p></td><td colspan="1" rowspan="1" align="center" valign="middle" height="27" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;"><p style="outline: 0px;visibility: visible;"><span style="outline: 0px;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &#34;PingFang SC&#34;, Cambria, Cochin, Georgia, Times, &#34;Times New Roman&#34;, serif;font-size: 16px;letter-spacing: normal;text-align: left;background-color: rgb(255, 251, 0);visibility: visible;">21款</span></p></td><td colspan="1" rowspan="1" width="62" align="center" valign="middle" height="27" style="outline: 0px;word-break: break-all;hyphens: auto;visibility: visible;"><p style="outline: 0px;visibility: visible;"><span style="outline: 0px;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &#34;PingFang SC&#34;, Cambria, Cochin, Georgia, Times, &#34;Times New Roman&#34;, serif;font-size: 16px;letter-spacing: normal;text-align: left;visibility: visible;">2024.08.05</span></p></td></tr></tbody></table>  
漏洞参考链接：  
  
[1] https://issues.apache.org/jira/browse/OFBIZ-13128  
  
[2] https://ofbiz.apache.org/security.html  
  
  
![](https://mmbiz.qpic.cn/mmbiz_gif/jnoOCicuJTTleeXCg2txIn4ib3m7nLRUfUy0OyJDDLZXUsHDRXeZHRkT4Y7DhHPU5B18NZswGyUmwsbEQGqJ3IYA/640?wx_fmt=gif&wxfrom=5&wx_lazy=1&tp=webp "")  
  
**国内安全验证的开创者和领军者**  
  
北京知其安科技有限公司创立于2021年8月，是一家致力于技术和产品创新驱动的新一代网络安全企业。创始人聂君是国内安全运营最早的提出者和实践者，被誉为“安全运营四杰”。创始团队具备丰富的甲方安全运营实践经验，拥有二十余项网络安全技术专利，具备优秀的自主创新和研发能力。旗下的“离朱-安全验证平台”，率先在国内提出并推广“安全验证”理念，是国内首个自主创新大规模商业化落地的网络安全能力验证平台，产品已服务近百家金融、央企、智能制造、互联网等客户，累计PoC测试用户超600家，在行业中获得较好的用户反馈和评价。  
  
  
**精彩回顾**  
  
  
  
  
  
<table><tbody style="outline: 0px;"><tr opera-tn-ra-comp="_$.pages:0.layers:0.comps:12.classicTable1:0" powered-by="xiumi.us" style="outline: 0px;"><td colspan="1" rowspan="1" opera-tn-ra-cell="_$.pages:0.layers:0.comps:12.classicTable1:0.td@@0" width="100.0000%" data-style="padding: 0px; outline: 0px; word-break: break-all; hyphens: auto; border-style: none; border-color: rgb(62, 62, 62);" class="js_darkmode__575" style="padding: 0px;border-style: none;border-color: rgb(62, 62, 62);outline: 0px;word-break: break-all;hyphens: auto;"><section style="outline: 0px;"><section powered-by="xiumi.us" style="margin-top: 10px;outline: 0px;display: flex;flex-flow: row;justify-content: flex-start;"><section style="outline: 0px;display: inline-block;vertical-align: middle;width: auto;min-width: 10%;height: auto;flex: 0 0 auto;align-self: center;box-shadow: rgb(0, 0, 0) 0px 0px 0px;"><section powered-by="xiumi.us" style="outline: 0px;line-height: 1;"><p style="outline: 0px;"><span style="outline: 0px;font-size: 14px;letter-spacing: 0.5px;font-family: &#34;Helvetica Neue&#34;, Helvetica, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;"><strong style="outline: 0px;"><span style="outline: 0px;color: rgb(4, 118, 210);">01 </span></strong></span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzkzNTI5NTgyMw==&amp;mid=2247486095&amp;idx=1&amp;sn=d9beaade9283cd2adb136da604620099&amp;chksm=c2b164aff5c6edb9adbf26541a237fc6444b0e12c7a3dfd11ca83fc2698141c4ce4cfd5726e6&amp;scene=21#wechat_redirect" textvalue="安全验证，实现安全运营闭环实践" linktype="text" imgurl="" imgdata="null" data-itemshowtype="11" tab="innerlink" data-linktype="2" hasload="1" style="color: var(--weui-LINK);outline: 0px;cursor: pointer;font-size: 14px;letter-spacing: 0.5px;font-family: &#34;Helvetica Neue&#34;, Helvetica, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;"><span style="outline: 0px;cursor: pointer;color: rgb(136, 136, 136);">安全验证，实现安全运营闭环实践</span></a></p></section></section></section><section powered-by="xiumi.us" style="margin-top: 5px;margin-bottom: 5px;outline: 0px;"><section data-style="outline: 0px; background-color: rgb(224, 224, 224); height: 1px; color: rgb(130, 140, 178) !important;" class="js_darkmode__576" style="outline: 0px;background-color: rgb(224, 224, 224);height: 1px;color: rgb(130, 140, 178) !important;"><svg viewBox="0 0 1 1" style="float:left;line-height:0;width:0;vertical-align:top;"></svg></section></section></section></td></tr><tr opera-tn-ra-comp="_$.pages:0.layers:0.comps:12.classicTable1:1" powered-by="xiumi.us" style="outline: 0px;"><td colspan="1" rowspan="1" opera-tn-ra-cell="_$.pages:0.layers:0.comps:12.classicTable1:1.td@@0" width="100.0000%" data-style="padding: 0px; outline: 0px; word-break: break-all; hyphens: auto; border-style: none; border-color: rgb(62, 62, 62);" class="js_darkmode__577" style="padding: 0px;border-style: none;border-color: rgb(62, 62, 62);outline: 0px;word-break: break-all;hyphens: auto;"><section style="outline: 0px;"><section powered-by="xiumi.us" style="margin-top: -5px;outline: 0px;display: flex;flex-flow: row;justify-content: flex-start;"><section style="outline: 0px;display: inline-block;vertical-align: middle;width: auto;min-width: 10%;height: auto;flex: 0 0 auto;align-self: center;"><section powered-by="xiumi.us" style="outline: 0px;font-size: 20px;color: rgb(4, 118, 210);line-height: 1;"><p style="outline: 0px;"><br style="outline: 0px;"/></p><p style="outline: 0px;"><span style="outline: 0px;font-size: 14px;letter-spacing: 0.5px;font-family: &#34;Helvetica Neue&#34;, Helvetica, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;"><strong style="outline: 0px;">02 </strong></span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzkzNTI5NTgyMw==&amp;mid=2247486024&amp;idx=1&amp;sn=dba1bec1e93bd4f96162fb01ada89171&amp;chksm=c2b16468f5c6ed7ef27d9bbde9830aa4c2f2e8f406d6785b9f836318b2274f80c4815f68da5e&amp;scene=21#wechat_redirect" textvalue="辞别腾讯，下一站知其安（创业）" linktype="text" imgurl="" imgdata="null" data-itemshowtype="11" tab="innerlink" data-linktype="2" hasload="1" style="color: var(--weui-LINK);outline: 0px;cursor: pointer;font-size: 14px;letter-spacing: 0.5px;font-family: &#34;Helvetica Neue&#34;, Helvetica, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;"><span style="outline: 0px;cursor: pointer;color: rgb(136, 136, 136);">辞别腾讯，下一站知其安（创业）</span></a></p></section></section></section><section powered-by="xiumi.us" style="margin-top: 5px;margin-bottom: 5px;outline: 0px;"><section data-style="outline: 0px; background-color: rgb(224, 224, 224); height: 1px; color: rgb(130, 140, 178) !important;" class="js_darkmode__578" style="outline: 0px;background-color: rgb(224, 224, 224);height: 1px;color: rgb(130, 140, 178) !important;"><svg viewBox="0 0 1 1" style="float:left;line-height:0;width:0;vertical-align:top;"></svg></section></section></section></td></tr><tr opera-tn-ra-comp="_$.pages:0.layers:0.comps:12.classicTable1:2" powered-by="xiumi.us" style="outline: 0px;"><td colspan="1" rowspan="1" opera-tn-ra-cell="_$.pages:0.layers:0.comps:12.classicTable1:2.td@@0" width="100.0000%" data-style="padding: 0px; outline: 0px; word-break: break-all; hyphens: auto; border-style: none; border-color: rgb(62, 62, 62);" class="js_darkmode__579" style="padding: 0px;border-style: none;border-color: rgb(62, 62, 62);outline: 0px;word-break: break-all;hyphens: auto;"><section style="outline: 0px;"><section powered-by="xiumi.us" style="margin-top: 10px;outline: 0px;display: flex;flex-flow: row;justify-content: flex-start;"><section style="outline: 0px;display: inline-block;vertical-align: middle;width: auto;min-width: 10%;height: auto;flex: 0 0 auto;align-self: center;"><section powered-by="xiumi.us" style="outline: 0px;font-size: 20px;color: rgb(4, 118, 210);line-height: 1;"><p style="outline: 0px;"><span style="outline: 0px;font-size: 14px;letter-spacing: 0.5px;font-family: &#34;Helvetica Neue&#34;, Helvetica, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;"><strong style="outline: 0px;">03 </strong></span><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzkzNTI5NTgyMw==&amp;mid=2247494313&amp;idx=1&amp;sn=91bcb364b055065443f8b0f9cb4c3786&amp;chksm=c2b28489f5c50d9f9ffb98eb2dc05ba3947e7e37f62d8922acf0299483b6aaeff49803898ccc&amp;token=1979671097&amp;lang=zh_CN&amp;scene=21#wechat_redirect" textvalue="一个网络安全创业者的2023 年总结" linktype="text" imgurl="" imgdata="null" tab="innerlink" data-linktype="2" style="color: var(--weui-LINK);outline: 0px;cursor: pointer;"><span style="outline: 0px;color: rgb(136, 136, 136);letter-spacing: 0.578px;text-align: left;font-size: 14px;">一个网络安全创业者的2023 年总结</span></a></p></section></section></section><section powered-by="xiumi.us" style="margin-top: 5px;margin-bottom: 5px;outline: 0px;"><section data-style="outline: 0px; background-color: rgb(224, 224, 224); height: 1px; color: rgb(130, 140, 178) !important;" class="js_darkmode__580" style="outline: 0px;background-color: rgb(224, 224, 224);height: 1px;color: rgb(130, 140, 178) !important;"><svg viewBox="0 0 1 1" style="float:left;line-height:0;width:0;vertical-align:top;"></svg></section></section></section></td></tr><tr opera-tn-ra-comp="_$.pages:0.layers:0.comps:12.classicTable1:3" powered-by="xiumi.us" style="outline: 0px;"><td colspan="1" rowspan="1" opera-tn-ra-cell="_$.pages:0.layers:0.comps:12.classicTable1:3.td@@0" width="100.0000%" data-style="padding: 0px; outline: 0px; word-break: break-all; hyphens: auto; border-style: none; border-color: rgb(62, 62, 62);" class="js_darkmode__581" style="padding: 0px;border-style: none;border-color: rgb(62, 62, 62);outline: 0px;word-break: break-all;hyphens: auto;"><section style="outline: 0px;"><section powered-by="xiumi.us" style="margin-top: 10px;outline: 0px;display: flex;flex-flow: row;justify-content: flex-start;"><section style="outline: 0px;display: inline-block;vertical-align: middle;width: auto;min-width: 10%;height: auto;flex: 0 0 auto;align-self: center;"><section powered-by="xiumi.us" style="outline: 0px;font-size: 20px;color: rgb(4, 118, 210);line-height: 1;"><p style="outline: 0px;"><span style="outline: 0px;font-size: 14px;letter-spacing: 0.5px;font-family: &#34;Helvetica Neue&#34;, Helvetica, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;"><strong style="outline: 0px;">04 </strong></span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzkzNTI5NTgyMw==&amp;mid=2247501896&amp;idx=1&amp;sn=5ea1d9a3e52f2d3c8f43cea8d1010052&amp;chksm=c2b2a668f5c52f7e1dd5bfe920a29df6e48869dc163ccd8ad6a6af0ef404c11d4ef4a51ca5bc&amp;scene=21#wechat_redirect" textvalue="证券行业安全验证提升精细化安全运营能力创新实践‍" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1" style="color: var(--weui-LINK);outline: 0px;cursor: default;"><span style="outline: 0px;font-size: 14px;color: rgb(136, 136, 136);">证券行业安全验证提升精细化安全运营能力创新实践</span></a></p></section></section></section><section powered-by="xiumi.us" style="margin-top: 5px;margin-bottom: 5px;outline: 0px;"><section data-style="outline: 0px; background-color: rgb(224, 224, 224); height: 1px; color: rgb(130, 140, 178) !important;" class="js_darkmode__582" style="outline: 0px;background-color: rgb(224, 224, 224);height: 1px;color: rgb(130, 140, 178) !important;"><span style="color: rgba(0, 0, 0, 0.9);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &#34;Helvetica Neue&#34;, &#34;PingFang SC&#34;, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei UI&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;font-size: var(--articleFontsize);letter-spacing: 0.034em;text-align: justify;"></span><span style="outline: 0px;color: rgba(0, 0, 0, 0.9);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, &#34;Helvetica Neue&#34;, &#34;PingFang SC&#34;, &#34;Hiragino Sans GB&#34;, &#34;Microsoft YaHei UI&#34;, &#34;Microsoft YaHei&#34;, Arial, sans-serif;font-size: var(--articleFontsize);letter-spacing: 0.034em;text-align: justify;"></span></section></section></section></td></tr></tbody></table>  
  
  
