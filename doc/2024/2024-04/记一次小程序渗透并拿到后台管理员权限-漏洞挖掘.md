#  记一次小程序渗透并拿到后台管理员权限-漏洞挖掘   
漏洞挖掘  渗透安全HackTwo   2024-04-09 00:00  
  
0x01 前言   
       在一次攻防演练打点过程中，前期先从备案查询、子域名收集、端口扫描等方式获取资产URL。其次对URL进行指纹识别，虽然发现了几个存在指纹的系统，但后续渗透发现漏洞已无法利用，漏洞已修。最后老实本分对微信小程序进行搜索行渗透，寻找突破口！  
  
**末尾可领取字典等资源文件**  
  
0x02 信息收集随便搜一个关键字，翻一下找一个顺眼的目标进入看看功能进行抓包收集一些有用的信息与请求包（URL域名），对子域名进行查询与枚举，同时查询目标是否使用CDN进行隐藏真实IP等等对收集到的子域名进行访问找到了目标后台继续对目标所使用的技术信息进行收集，可以看到目标使用了Vue、Element UI、Nginx等，Vue的话可以查一波有没有未授权接口泄露对目标进行检测是否有Vue泄露的接口并进行收集，可以直接翻App.js源码进行收集暴露的接口也可以用工具收集，当然我是习惯手自一体这里也可以对小程序进行反编译分析源码中有无敏感信息泄露，有时候能找到硬编码的阿里云key和一些账号密码信息。0x03 漏洞利用说一下接下来的思路这里就有很多个方向了如爆破账号密码另一个就是查看收集到的接口里有无未授权访问也可以进行继续爆破地址后有无项目备份文件、或者一些前辈留下来的shell后门文件对IP进行全端口扫描看有无别的重要信息系统再在输入框测一下有无SQL注入漏洞，这里没有忘记密码功能就不测有无找回密码的逻辑漏洞了分析一下登录请求包中有无使用第三方组件信息（比如shiro等）这里我喜欢先分析请求包所以就直接分析登录请求包，直接放包提示密码错误那证明账号是对的，可以看到password字段为Base64加密，直接上字典密码转Base64开始爆破。同时也没看到有使用shiro等的标志，结果字典跑完了密码也没爆出来，有点意思。此时也把IP扔到Goby与Nessus中进行全端口扫描一下同时看看有没有什么重要信息，可以看到服务器开了ssh、redis、mysql等服务，那就可以试试爆破ssh、mysql。还有Redis的未授权漏洞都可以挖一挖。（红队版goby在内部星球置顶栏）在这些同时进行中的时候我又看了眼登录请求包，发现有个Type字段也不知道这个Type字段是干什么用的，秉承宁可没洞也要试试不放过的理念我把它改成了2。您猜怎么着？我就直接登录了。试了下任意密码下只要type是2就可以直接登，这个登录逻辑也是很nice。那这就不用多说了，直接改包，拿下！最后通过常规思路找文件上传处，成功Getshell，后续步骤不在一一截图0x04 总结        很多时候惊喜总在不经意间发生，但这需要坚持不懈的努力和细心，生活亦如此。喜欢的师傅可以点赞转发支持一下谢谢！0x05 内部星球VIP介绍-V1.3更新啦！       如果你想学习更多渗透挖洞技术欢迎加入我们内部星球可获得内部工具和享受内部资源，包含网上一些付费工具。详情直接点击下方链接进入了解，需要加入的直接点击下方链接了解即可，觉得价格高的师傅可后台回复" 星球 "有优惠券名额有限先到先得！内部包含网上需付费的0day/1day漏洞库，后续资源会更丰富在加入还是低价！👉点击了解-->>内部VIP知识星球福利介绍V1.3版本-星球介绍  
  
结尾  
  
# 免责声明  
  
  
# 获取方法  
  
  
回复“**app**  
" 获取  app渗透和app抓包教程  
  
回复“**渗透字典**" 获取 针对一些字典重新划分处理（需要更多完整字典可加入星球获取）  
  
回复“**书籍**" 获取 网络安全相关经典书籍电子版pdf  
  
********  
  
# 最后必看  
  
  
      
文章中的案例或工具仅面向合法授权的企业安全建设行为，如您需要测试内容的可用性，请自行搭建靶机环境，勿用于非法行为。如  
用于其他用途，由使用者承担全部法律及连带责任，与作者和本公众号无关。  
本项目所有收录的poc均为漏洞的理论判断，不存在漏洞利用过程，不会对目标发起真实攻击和漏洞利用。文中所涉及的技术、思路和工具仅供以安全为目的的学习交流使用。  
如您在使用本工具或阅读文章的过程中存在任何非法行为，您需自行承担相应后果，我们将不承担任何法律及连带责任。本工具或文章或来源于网络，若有侵权请联系作者删除，请在24小时内删除，请勿用于商业行为，自行查验是否具有后门，切勿相信软件内的广告！  
  
  
  
  
  
# 往期推荐  
  
  
**1. 内部VIP知识星球福利介绍V1.2版本-元旦优惠**  
  
**2. 最新BurpSuite2023.12.1专业版中英文版下载**  
  
[3. 最新Nessus2023下载Windows/Linux](http://mp.weixin.qq.com/s?__biz=Mzg3ODE2MjkxMQ==&mid=2247484713&idx=1&sn=0fdab59445d9e0849843077365607b18&chksm=cf16a399f8612a8f6feb8362b1d946ea15ce4ff8a4a4cf0ce2c21f433185c622136b3c5725f3&scene=21#wechat_redirect)  
  
  
[4. 最新xray1.9.11高级版下载Windows/Linux](http://mp.weixin.qq.com/s?__biz=Mzg3ODE2MjkxMQ==&mid=2247483882&idx=1&sn=e1bf597eb73ee7881ae132cc99ac0c8e&chksm=cf16a75af8612e4c73eda9f52218ccfc6de72725eb37aff59e181435de095b71e653b446c521&scene=21#wechat_redirect)  
  
  
[5. 最新HCL AppScan Standard 10.2.128273破解版下载](http://mp.weixin.qq.com/s?__biz=Mzg3ODE2MjkxMQ==&mid=2247483850&idx=1&sn=8fad4ed1e05443dce28f6ee6d89ab920&chksm=cf16a77af8612e6c688c55f7a899fe123b0f71735eb15988321d0bd4d14363690c96537bc1fb&scene=21#wechat_redirect)  
  
  
  
###### 渗透安全HackTwo  
  
  
微信号：关注公众号获取  
  
后台回复星球加入：  
知识星球  
  
扫码关注 了解更多  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_png/RjOvISzUFq6qFFAxdkV2tgPPqL76yNTw38UJ9vr5QJQE48ff1I4Gichw7adAcHQx8ePBPmwvouAhs4ArJFVdKkw/640?wx_fmt=png "二维码")  
  
  
  
喜欢的朋友可以点赞转发支持一下  
  
  
