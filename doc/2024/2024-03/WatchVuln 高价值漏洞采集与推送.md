#  WatchVuln 高价值漏洞采集与推送   
zema1  猪猪谈安全   2024-03-12 21:00  
  
项目地址  
```
https://github.com/zema1/watchvuln?tab=readme-ov-file
```  
  
众所周知，CVE 漏洞库中 99% 以上的漏洞只是无现实意义的编号。我想集中精力看下当下需要关注的高价值漏洞有哪些，而不是被各类 RSS 和公众号的   
威胁情报 淹没。于是写了这个小项目来抓取部分高质量的漏洞信息源然后做推送。 WatchVuln意为  
监测 漏洞更新，同时也表示这些漏洞需要  
注意。  
  
当前抓取了这几个站点的数据:  
<table><thead><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><th style=" padding: 6px 13px;font-weight: var(--base-text-weight-semibold, 600) ; ; ; ; ; ; ; ; ; ; ; ">名称</th><th style=" padding: 6px 13px;font-weight: var(--base-text-weight-semibold, 600) ; ; ; ; ; ; ; ; ; ; ; ">地址</th><th style=" padding: 6px 13px;font-weight: var(--base-text-weight-semibold, 600) ; ; ; ; ; ; ; ; ; ; ; ">推送策略</th></tr></thead><tbody><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">阿里云漏洞库</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">https://avd.aliyun.com/high-risk/list</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">等级为高危或严重</td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">OSCS开源安全情报预警</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">https://www.oscs1024.com/cm</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">等级为高危或严重<span style="font-weight: var(--base-text-weight-semibold, 600);">并且</span>包含 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">预警</code> 标签</td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">奇安信威胁情报中心</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">https://ti.qianxin.com/</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">等级为高危严重<span style="font-weight: var(--base-text-weight-semibold, 600);">并且</span>包含 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">奇安信CERT验证</code> <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">POC公开</code> <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">技术细节公布</code>标签之一</td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">微步在线研究响应中心(公众号)</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">https://x.threatbook.com/v5/vulIntelligence</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">等级为高危或严重</td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">知道创宇Seebug漏洞库</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">https://www.seebug.org/</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">等级为高危或严重</td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">Struts2 Security Bulletins</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">Struts2 Security Bulletins</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">等级为高危或严重</td></tr></tbody></table>> 所有信息来自网站公开页面, 如果有侵权，请提交 issue, 我会删除相关源。  
> 如果有更好的信息源也可以反馈给我，需要能够响应及时 & 有办法过滤出有价值的漏洞  
  
  
具体来说，消息的推送有两种情况, 两种情况有内置去重，不会重复推送:  
- 新建的漏洞符合推送策略，直接推送,  
  
- 新建的漏洞不符合推送策略，但漏洞信息被更新后符合了推送策略，也会被推送  
  
![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/3ZX4O1QxGtMqkQSnf4XUg164QJ3VHFUGRJdJOIZ0I9MyEpO623xh20ibmNc3ypQeNlf3BqX8wMZ7IxE9pZqJqibw/640?wx_fmt=jpeg&from=appmsg "")  
## 快速使用  
  
  
支持下列推送方式:  
- 钉钉群组机器人  
  
- 微信企业版群组机器人  
  
- 飞书群组机器人  
  
- Telegram Bot  
  
- Server 酱  
  
- 自定义 Bark 服务  
  
- 自定义 Webhook 服务  
  
### 使用 Docker  
  
  
Docker 方式推荐使用环境变量来配置服务参数  
<table><thead><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><th style=" padding: 6px 13px;font-weight: var(--base-text-weight-semibold, 600) ; ; ; ; ; ; ; ; ; ; ; ">环境变量名</th><th style=" padding: 6px 13px;font-weight: var(--base-text-weight-semibold, 600) ; ; ; ; ; ; ; ; ; ; ; ">说明</th><th style=" padding: 6px 13px;font-weight: var(--base-text-weight-semibold, 600) ; ; ; ; ; ; ; ; ; ; ; ">默认值</th></tr></thead><tbody><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">DB_CONN</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">数据库链接字符串，详情见 数据库连接</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">sqlite3://vuln_v3.sqlite3</code></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">DINGDING_ACCESS_TOKEN</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">钉钉机器人 url 的 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">access_token</code> 部分</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">DINGDING_SECRET</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">钉钉机器人的加签值 （仅支持加签方式）</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">LARK_ACCESS_TOKEN</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">飞书机器人 url 的 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">/open-apis/bot/v2/hook/</code> 后的部分, 也支持直接指定完整的 url 来访问私有部署的飞书</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">LARK_SECRET</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">飞书机器人的加签值 （仅支持加签方式）</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">WECHATWORK_KEY </code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">微信机器人 url 的 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">key</code> 部分</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">SERVERCHAN_KEY </code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">Server酱的 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">SCKEY</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">WEBHOOK_URL</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">自定义 webhook 服务的完整 url</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">BARK_URL</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">Bark 服务的完整 url, 路径需要包含 DeviceKey</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">TELEGRAM_BOT_TOKEN</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">Telegram Bot Token</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">TELEGRAM_CHAT_IDS</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">Telegram Bot 需要发送给的 chat 列表，使用 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">,</code> 分割</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">SOURCES</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">启用哪些漏洞信息源，逗号分隔, 可选 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">avd</code>, <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">ti</code>, <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">oscs</code>, <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">seebug</code>,<code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">threatbook</code>,<code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">struts2</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">avd,ti,oscs,threatbook,seebug,struts2</code></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">INTERVAL</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">检查周期，支持秒 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">60s</code>, 分钟 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">10m</code>, 小时 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">1h</code>, 最低 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">1m</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">30m</code></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">ENABLE_CVE_FILTER</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">启用 CVE 过滤，开启后多个数据源的统一 CVE 将只推送一次</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">true</code></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">NO_FILTER</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">禁用上述推送过滤策略，所有新发现的漏洞都会被推送</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">false</code></td></tr><tr style="background-color: var(--bgColor-muted, var(--color-canvas-subtle));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">NO_START_MESSAGE</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">禁用服务启动的提示信息</td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">false</code></td></tr><tr style="background-color: var(--bgColor-default, var(--color-canvas-default));border-top: 1px solid var(--borderColor-muted, var(--color-border-muted));"><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">HTTPS_PROXY</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; ">给所有请求配置代理, 支持 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">socks5://xxxx</code> 或者 <code style="font-family: ui-monospace, SFMono-Regular, &#34;SF Mono&#34;, Menlo, Consolas, &#34;Liberation Mono&#34;, monospace;font-size: 13.6px;padding: 0.2em 0.4em;white-space-collapse: break-spaces;background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));border-radius: 6px;">http(s)://xxkx</code></td><td style=" padding: 6px 13px ; ; ; ; ; ; ; ; ; ; ; "><br/></td></tr></tbody></table>  
比如使用钉钉机器人  
```
```  
  
  
当然，你可以仓靠使用本仓库的 docker-compose.yaml 文件，使用 docker-compose 来启动容器。  
  
每次更新记得重新拉镜像:  
```
docker pull zemal/watchvuln:latest

```  
  
  
使用飞书机器人使用企业微信机器人使用Telegram 机器人使用自定义 Bark 服务使用自定义 Webhook 服务使用server酱机器人使用多种服务  
  
初次运行会在本地建立全量数据库，大约需要 1 分钟，可以使用 docker logs -f [containerId] 来查看进度, 完成后会在群内收到一个提示消息，表示服务已经在正常运行了。  
### 使用二进制  
  
  
前往 Release 下载对应平台的二进制，然后在命令行执行。命令行参数请参考 Docker 环境变量部分的说明，可以一一对应。  
```
```  
  
  
在参数中指定相关 Token 即可, 比如使用钉钉机器人  
```
$ ./watchvuln --dt DINGDING_ACCESS_TOKEN --ds DINGDING_SECRET -i 30m

```  
  
  
使用飞书机器人使用企业微信机器人使用server酱机器人使用Telegram 机器人使用自定义 Bark 服务使用自定义 Webhook 服务使用多种服务  
## 数据库连接  
  
  
默认使用 sqlite3 作为数据库，数据库文件为 vuln_v3.sqlite3，如果需要使用其他数据库，可以通过 --db 参数或是环境变量 DB_CONN 指定连接字符串，当前支持的数据库有:  
- sqlite3://filename  
  
- mysql://user:pass@host:port/dbname  
  
- postgres://user:pass@host:port/dbname  
  
注意：该项目不做数据向后兼容保证，版本升级可能存在数据不兼容的情况，如果报错需要删库重来。  
## 配置代理  
  
  
watchvuln 支持配置上游代理来绕过网络限制，支持两种方式:  
- 环境变量 HTTPS_PROXY  
  
- 命令行参数 --proxy/-x  
  
支持 socks5://xxxx 或者 http(s)://xxkx 两种代理形式。  
## 常见问题  
  
1. 服务重启后支持增量更新吗  
  
支持，每次检查会按照一定的策略去增量抓取  
  
1. Docker 拉取镜像提示 not found  
  
你使用的 Docker 版本太老了，不支持新的镜像格式，需要升级一下 Docker 版本，参考 #16  
  
![](https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeSsicAgIUNHtMib9a69NOWXw1A7mgRqqiat1SycQ0b6e5mBqC0pVJ3oicrQnCTh4gqMGiaKUPicTsUc4Tw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1 "")  
   
点击下方小卡片或扫描下方二维码观看更多**技术文章**  
![](https://mmbiz.qpic.cn/mmbiz_png/XOPdGZ2MYOeSsicAgIUNHtMib9a69NOWXw1A7mgRqqiat1SycQ0b6e5mBqC0pVJ3oicrQnCTh4gqMGiaKUPicTsUc4Tw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1 "")  
  
  
  
![](https://mmbiz.qpic.cn/mmbiz_jpg/3ZX4O1QxGtNugz59dONCI9VFaRVRJ1PnwrFy5cAnhjZht6N5nFrjQ8liajKbqnQevqdjn9jlepoUic6ybZVL8Nibw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1 "")  
  
**师傅们点赞、转发、在看就是最大的支持**  
  
